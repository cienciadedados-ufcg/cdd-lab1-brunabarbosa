---
title: "EDA LAB1"
author: "Bruna Barbosa"
output:
  html_notebook:
    toc: yes
    toc_float: yes
  html_document:
    df_print: paged
    toc: yes
    toc_float: yes
---

```{r setup, echo=FALSE, warning=FALSE, message=FALSE}
library(tidyverse)
library(here)
theme_set(theme_bw())
```



```{r}
episodesHouseOfCards = read_csv(here("data/series_from_imdb.csv"), 
                    progress = FALSE,
                    col_types = cols(.default = col_double(), 
                                     series_name = col_character(), 
                                     episode = col_character(), 
                                     url = col_character(),
                                     season = col_character())) %>% 
    filter(series_name == "House of Cards") 
```

Analisaremos os episódios da série House of Cards e da série Game of Thrones. 

## House of Cards

### Quantas avaliações temos por episódio? 

```{r}
episodesHouseOfCards %>% 
    ggplot(aes(x = season, y = user_votes, color = season)) +
    geom_violin() + 
    geom_jitter(width = .07) 
```

```{r}
episodesHouseOfCards %>% 
    ggplot(aes(x = season_ep, y = user_votes, color = season))  + 
    geom_line() + 
    facet_wrap(~ season)
               
```


O numero de de avaliações sofreu uma leve queda, apenas o que destoa da tendencia sao os episodios season premiere e season finale.

O declinio de avaliacoes pode ter sido causado por um numero menor de assinantes do Netflix assistindo a serie. O serviço nao revela dados de audiencia, divulga apenas o numero total de assinantes. 

### As avaliações são boas? 

```{r}
episodesHouseOfCards %>% 
    ggplot(aes(x = season, y = user_rating, color = season)) +
    geom_violin() + 
    geom_jitter(width = .07) 
```


### A qualidade da serie vem crescendo? 

```{r}
episodesHouseOfCards %>% 
  ggplot(aes(x = season_ep, y = user_rating, color = season)) + 
  geom_line() + 
  geom_point() +
  facet_wrap(~ season)
```


```{r}
episodesHouseOfCards %>% 
    ggplot(aes(x = season, y = user_rating, color = season)) + 
    geom_boxplot(width = .5, outlier.color = NA) +   
    geom_jitter(width = .1, size = 2, alpha = .5, color = "red")
```

### Um maior numero de avaliações indica maior qualidade por episodio?

```{r}
ggplot(episodesHouseOfCards, aes(x=user_votes, y=user_rating)) +
  geom_point(shape=1) + geom_smooth(method=lm , color="red", se=TRUE) # Add linear regression line 
```

```{r}
episodesHouseOfCards %>% 
    group_by(season) %>% 
    summarise(correlacao_linear = cor(user_votes, user_rating, 
                                      method = "pearson"), 
              correlacao_kendall = cor(user_votes, user_rating, 
                                       method = "kendall"))

```

Alguns episodios de maior qualidade receberam um maior numero de avaliações, porem nem sempre isso ocorre.

### Os fas da serie vem crescendo?

São considerados fãs usuarios que atribuiram a nota 10 ao seriado.

```{r}
episodesHouseOfCards %>%
    ggplot(aes(x = season_ep, y = r10, color = season)) +
    geom_line() +
    scale_x_continuous(breaks = 1:12) +
    facet_wrap(~ season)
```

Não é possivel identificar uma tendencia no numero de fas deste seriado.

## Game of Thrones

```{r}
episodesGameOfThrones = read_csv(here("data/series_from_imdb.csv"), 
                    progress = FALSE,
                    col_types = cols(.default = col_double(), 
                                     series_name = col_character(), 
                                     episode = col_character(), 
                                     url = col_character(),
                                     season = col_character())) %>% 
    filter(series_name == "Game of Thrones") 
```

